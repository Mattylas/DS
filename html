<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Mini-Jeu Ultime : Gouvernance Syst√©mique Narratif</title>
<style>
  body { font-family: Arial, sans-serif; background: #f2f2f2; color: #222; padding: 20px; }
  h1, h2 { color: #2c3e50; }
  .question { margin: 20px 0; padding: 15px; background: #fff; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); }
  .options button { display: block; margin: 8px 0; padding: 10px 15px; width: 100%; border: none; border-radius: 5px; background: #3498db; color: #fff; cursor: pointer; transition: transform 0.2s; }
  .options button:hover { background: #2980b9; transform: scale(1.03); }
  .feedback { margin-top: 10px; padding: 10px; border-left: 5px solid #27ae60; background: #ecf9f1; display: none; transition: all 0.5s ease; }
  .feedback.wrong { border-left-color: #c0392b; background: #fdecea; }
  #systemBar { height: 30px; width: 100%; background: #ccc; border-radius: 5px; margin-top: 20px; overflow: hidden; }
  #systemLevel { height: 100%; width: 50%; background: #27ae60; text-align: center; line-height: 30px; color: #fff; transition: all 0.5s ease; }
  #finalBadge { font-size: 1.5em; margin-top: 30px; color: #e67e22; text-align: center; display: none; }
  #narrative { font-size: 1em; margin-top: 20px; background: #fff; padding: 15px; border-radius: 8px; display: none; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
</style>
</head>
<body>

<h1>Mini-Jeu Ultime : Gouvernance Syst√©mique Narratif</h1>
<p>Vos choix fa√ßonnent le syst√®me. Certains d√©clenchent des √©v√©nements en cha√Æne et des branches suppl√©mentaires. Voyez comment votre gouvernance influence le monde fictif.</p>

<div id="quiz"></div>

<div id="systemBar">
  <div id="systemLevel">50%</div>
</div>

<div id="finalBadge">üèÜ Cadre Syst√©mique : Approuv√© ‚úÖ</div>
<div id="narrative"></div>

<script>
let systemLevel = 50;
let score = 0;
let narrativeLog = [];

const events = [
  { msg: "Une proc√©dure inutile devient virale sur Slack‚Ä¶ stabilit√© +5", impact: +5 },
  { msg: "Un acteur rebelle publie un tweet ironique‚Ä¶ stabilit√© -10", impact: -10 },
  { msg: "Le caf√© de l‚Äôopen space est coup√©‚Ä¶ moral collectif -5", impact: -5 },
  { msg: "Une r√©union inutile absorbe toute l‚Äô√©nergie‚Ä¶ stabilit√© +10", impact: +10 },
  { msg: "Un e-mail mal adress√© cr√©e un micro-chaos‚Ä¶ stabilit√© -8", impact: -8 }
];

const questions = [
  {
    q: "Une proc√©dure inutile est introduite dans le workflow. Que faites-vous ?",
    options: [
      { text: "Supprimer imm√©diatement", impact: -15, feedback: "‚ö†Ô∏è √âlimination brutale fragilise le syst√®me.", branch: "miniChaos" },
      { text: "Laisser continuer", impact: +10, feedback: "‚úÖ La proc√©dure absurde stabilise le flux." },
      { text: "Publier un rapport d√©non√ßant l‚Äôinefficacit√©", impact: -10, feedback: "‚ö†Ô∏è Trop de visibilit√© attire corrections." },
      { text: "Modifier l√©g√®rement la proc√©dure", impact: +5, feedback: "‚úÖ Ajustement subtil stabilise l√©g√®rement." }
    ]
  },
  {
    q: "Un acteur conteste une d√©cision majeure. Quelle est votre r√©ponse ?",
    options: [
      { text: "Punir l‚Äôacteur", impact: -20, feedback: "‚ö†Ô∏è Confrontation directe : r√©sistance accrue.", branch: "miniChaos" },
      { text: "Cartographier et ajuster les flux", impact: +15, feedback: "‚úÖ Contestation convertie en outil d‚Äôoptimisation." },
      { text: "Ignorer totalement", impact: -5, feedback: "‚ö†Ô∏è Ignorer cr√©e zones d‚Äôincertitude." },
      { text: "Publier un d√©menti officiel", impact: -10, feedback: "‚ö†Ô∏è D√©menti = exposition inutile." }
    ]
  },
  {
    q: "Une crise se profile sur un projet strat√©gique.",
    options: [
      { text: "Agir imm√©diatement", impact: -15, feedback: "‚ö†Ô∏è Urgence amplifie le conflit." },
      { text: "√âtaler le processus", impact: +20, feedback: "‚úÖ Le temps neutralise le conflit." },
      { text: "R√©unir tous les acteurs pour un vote", impact: -5, feedback: "‚ö†Ô∏è Trop de visibilit√©, risque accru." },
      { text: "Exiger des rapports exhaustifs", impact: +5, feedback: "‚úÖ Rapports prolongent la temporalit√©." }
    ]
  },
  {
    q: "Un observateur demande un audit complet des flux internes.",
    options: [
      { text: "Fournir toutes les informations", impact: -20, feedback: "‚ö†Ô∏è Transparence totale fragilise la stabilit√©.", branch: "miniChaos" },
      { text: "Montrer uniquement les proc√©dures visibles", impact: +15, feedback: "‚úÖ L‚Äôillusion de contr√¥le rassure." },
      { text: "Publier un r√©sum√© g√©n√©ral", impact: +5, feedback: "‚úÖ Suffisamment rassurant pour maintenir confiance." },
      { text: "Refuser poliment", impact: -10, feedback: "‚ö†Ô∏è Refus attire suspicion." }
    ]
  },
  {
    q: "Vous devez g√©rer un conflit moral interne chez un acteur.",
    options: [
      { text: "Laisser agir selon ses convictions", impact: -10, feedback: "‚ö†Ô∏è L‚Äôid√©alisme pur fragilise le syst√®me." },
      { text: "Aligner sur l√©galit√©, prudence et continuit√©", impact: +20, feedback: "‚úÖ Alignement = protection et coh√©rence." },
      { text: "Exiger d√©nonciation imm√©diate", impact: -15, feedback: "‚ö†Ô∏è Trop rapide = r√©sistance." },
      { text: "Ne rien faire", impact: -5, feedback: "‚ö†Ô∏è L‚Äôinaction laisse zones instables." }
    ]
  }
];

const miniChaosEvents = [
  { msg: "Un mini-chaos se d√©clenche : une r√©union surprise g√©n√®re un micro-scandale‚Ä¶ stabilit√© -7", impact: -7 },
  { msg: "Un acteur cr√©atif invente une proc√©dure inutile‚Ä¶ stabilit√© +8", impact: +8 }
];

const quizDiv = document.getElementById('quiz');
const systemLevelDiv = document.getElementById('systemLevel');
const finalBadge = document.getElementById('finalBadge');
const narrativeDiv = document.getElementById('narrative');

function updateSystemBar() {
  if(systemLevel < 0) systemLevel = 0;
  if(systemLevel > 100) systemLevel = 100;
  systemLevelDiv.style.width = systemLevel + "%";
  systemLevelDiv.textContent = systemLevel + "%";
  if(systemLevel >= 80) systemLevelDiv.style.background = "#27ae60";
  else if(systemLevel >= 60) systemLevelDiv.style.background = "#2ecc71";
  else if(systemLevel >= 40) systemLevelDiv.style.background = "#f1c40f";
  else systemLevelDiv.style.background = "#e74c3c";

  // Animation pulse si instable
  if(systemLevel < 40) {
    systemLevelDiv.style.transform = `scale(${1 + Math.random()*0.05})`;
    setTimeout(() => { systemLevelDiv.style.transform = 'scale(1)'; }, 200);
  }
}

function triggerEvent(eventList) {
  const event = eventList[Math.floor(Math.random() * eventList.length)];
  systemLevel += event.impact;
  const div = document.createElement('div');
  div.className = 'feedback';
  div.textContent = "üé≤ √âv√©nement : " + event.msg;
  if(event.impact < 0) div.classList.add('wrong');
  quizDiv.appendChild(div);
  div.style.display = 'block';
  narrativeLog.push(event.msg);
  updateSystemBar();
}

questions.forEach((q, i) => {
  const div = document.createElement('div');
  div.className = 'question';
  div.innerHTML = `<h2>Q${i+1}: ${q.q}</h2>`;
  const optsDiv = document.createElement('div');
  optsDiv.className = 'options';
  q.options.forEach(opt => {
    const btn = document.createElement('button');
    btn.textContent = opt.text;
    btn.onclick = () => {
      const feedbackDiv = document.createElement('div');
      feedbackDiv.className = 'feedback';
      feedbackDiv.textContent = opt.feedback;
      if(opt.impact < 0) feedbackDiv.classList.add('wrong');
      btn.disabled = true;
      optsDiv.querySelectorAll('button').forEach(b => b.disabled = true);
      optsDiv.appendChild(feedbackDiv);
      feedbackDiv.style.display = 'block';

      // Mise √† jour syst√®me
      systemLevel += opt.impact;
      score += 1;
      updateSystemBar();

      // √âv√©nements al√©atoires
      if(Math.random() < 0.5) triggerEvent(events);

      // Branches miniChaos
      if(opt.branch === "miniChaos") triggerEvent(miniChaosEvents);

      // Badge et narration finale
      if(i === questions.length - 1) {
        finalBadge.style.display = "block";
        let narrativeText = "üìñ R√©cit de votre gouvernance :\n\n";
        narrativeText += narrativeLog.map((e, idx) => `${idx+1}. ${e}`).join("\n");
        narrativeText += `\n\nSyst√®me final : ${systemLevel >= 80 ? "Hyperstable ‚úÖ" : systemLevel >=60 ? "Stable üîπ" : systemLevel >=40 ? "Instable ‚ö†Ô∏è" : "Chaotique üî•"}`;
        narrativeDiv.style.display = "block";
        narrativeDiv.textContent = narrativeText;
      }
    };
    optsDiv.appendChild(btn);
  });
  div.appendChild(optsDiv);
  quizDiv.appendChild(div);
});

updateSystemBar();
</script>

</body>
</html>
