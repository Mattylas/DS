<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>De La Gouvernance</title>
<style>
body { font-family: Arial, sans-serif; background: #121212; color: #eee; padding: 20px; overflow-x: hidden; }
h1, h2 { color: #f39c12; text-shadow: 1px 1px 4px #000; }
.question { margin: 20px 0; padding: 20px; background: #2c3e50; border-radius: 12px; box-shadow: 0 0 20px #000; position: relative; overflow: hidden; }
.options button { display: block; margin: 10px 0; padding: 12px 20px; width: 100%; border: none; border-radius: 6px; background: #3498db; color: #fff; font-weight: bold; cursor: pointer; transition: all 0.2s; }
.options button:hover { background: #2980b9; transform: scale(1.08); }
#systemBar { height: 40px; width: 100%; background: #555; border-radius: 10px; margin-top: 20px; overflow: hidden; position: relative; }
#systemLevel { height: 100%; width: 50%; background: #27ae60; text-align: center; line-height: 40px; color: #fff; font-weight: bold; transition: all 0.5s ease; }
#finalBadge { font-size: 2em; margin-top: 30px; color: #e67e22; text-align: center; display: none; text-shadow: 2px 2px 5px #000; }
#narrative { font-size: 1em; margin-top: 20px; background: #34495e; padding: 20px; border-radius: 12px; display: none; box-shadow: 0 0 20px #000; white-space: pre-line; }
.floatingFeedback { position: absolute; padding: 12px 18px; border-radius: 6px; font-weight: bold; opacity: 0.95; animation: floatUp 2.5s ease forwards; pointer-events: none; z-index: 100; }
.floatingFeedback.good { background: #2ecc71; border-left: 5px solid #27ae60; color: #fff; }
.floatingFeedback.bad { background: #e74c3c; border-left: 5px solid #c0392b; color: #fff; }
@keyframes floatUp {
  0% { transform: translateY(0) scale(1); opacity: 0.95; }
  50% { transform: translateY(-50px) scale(1.05); opacity: 1; }
  100% { transform: translateY(-100px) scale(1); opacity: 0; }
}
.shake { animation: shakeAnim 0.5s; }
@keyframes shakeAnim { 0% { transform: translateX(0px); } 25% { transform: translateX(-6px); } 50% { transform: translateX(6px); } 75% { transform: translateX(-6px); } 100% { transform: translateX(0px); } }
</style>
</head>
<body>

<h1>De La Gouvernance</h1>
<p>Vos d√©cisions influencent un syst√®me complexe et chaque choix d√©clenche des √©v√©nements.</p>

<div id="quiz"></div>
<div id="systemBar"><div id="systemLevel">50%</div></div>
<div id="finalBadge">üèÜ Cadre Syst√©mique : Approuv√© ‚úÖ</div>
<div id="narrative"></div>

<audio id="soundGood" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
<audio id="soundBad" src="https://actions.google.com/sounds/v1/cartoon/boing.ogg"></audio>

<script>
let systemLevel = 50;
let score = 0;
let narrativeLog = [];

const questions = [
  { q:"Une proc√©dure inutile est introduite. Que faites-vous ?", options:[
    {text:"Supprimer imm√©diatement", impact:-15, feedback:"‚ö†Ô∏è √âlimination brutale fragilise le syst√®me.", branch:"miniChaos"},
    {text:"Laisser continuer", impact:+10, feedback:"‚úÖ La proc√©dure absurde stabilise le flux."},
    {text:"Publier un rapport", impact:-10, feedback:"‚ö†Ô∏è Trop de visibilit√© attire corrections."},
    {text:"Modifier l√©g√®rement", impact:+5, feedback:"‚úÖ Ajustement subtil stabilise l√©g√®rement."}
  ]},
  { q:"Un acteur conteste une d√©cision majeure.", options:[
    {text:"Punir l'acteur", impact:-20, feedback:"‚ö†Ô∏è Confrontation directe : r√©sistance accrue.", branch:"miniChaos"},
    {text:"Cartographier et ajuster", impact:+15, feedback:"‚úÖ Contestation convertie en outil d‚Äôoptimisation."},
    {text:"Ignorer", impact:-5, feedback:"‚ö†Ô∏è Ignorer cr√©e zones d‚Äôincertitude."},
    {text:"Publier un d√©menti", impact:-10, feedback:"‚ö†Ô∏è D√©menti = exposition inutile."}
  ]},
  { q:"Une crise se profile sur un projet strat√©gique.", options:[
    {text:"Agir imm√©diatement", impact:-15, feedback:"‚ö†Ô∏è Urgence amplifie le conflit."},
    {text:"√âtaler le processus", impact:+20, feedback:"‚úÖ Le temps neutralise le conflit."},
    {text:"R√©unir pour vote", impact:-5, feedback:"‚ö†Ô∏è Trop de visibilit√©, risque accru."},
    {text:"Exiger des rapports", impact:+5, feedback:"‚úÖ Rapports prolongent la temporalit√©."}
  ]},
  { q:"Un audit complet est demand√©.", options:[
    {text:"Tout montrer", impact:-20, feedback:"‚ö†Ô∏è Transparence totale fragilise le syst√®me.", branch:"miniChaos"},
    {text:"Montrer uniquement les visibles", impact:+15, feedback:"‚úÖ L‚Äôillusion de contr√¥le rassure."},
    {text:"R√©sum√© g√©n√©ral", impact:+5, feedback:"‚úÖ Suffisamment rassurant pour maintenir confiance."},
    {text:"Refuser poliment", impact:-10, feedback:"‚ö†Ô∏è Refus attire suspicion."}
  ]},
  { q:"Un conflit moral interne surgit.", options:[
    {text:"Laisser agir", impact:-10, feedback:"‚ö†Ô∏è L‚Äôid√©alisme pur fragilise le syst√®me."},
    {text:"Aligner sur prudence et continuit√©", impact:+20, feedback:"‚úÖ Alignement = protection et coh√©rence."},
    {text:"Exiger d√©nonciation", impact:-15, feedback:"‚ö†Ô∏è Trop rapide = r√©sistance."},
    {text:"Ne rien faire", impact:-5, feedback:"‚ö†Ô∏è L‚Äôinaction laisse zones instables."}
  ]}
];

const events = [
  { msg:"Proc√©dure virale sur Slack‚Ä¶ stabilit√© +5", impact:+5 },
  { msg:"Tweet rebelle‚Ä¶ stabilit√© -10", impact:-10 },
  { msg:"Caf√© coup√©‚Ä¶ moral -5", impact:-5 },
  { msg:"R√©union inutile‚Ä¶ stabilit√© +10", impact:+10 },
  { msg:"E-mail mal adress√©‚Ä¶ stabilit√© -8", impact:-8 }
];

const miniChaosEvents = [
  { msg:"Mini-chaos : r√©union surprise‚Ä¶ stabilit√© -7", impact:-7 },
  { msg:"Proc√©dure invent√©e‚Ä¶ stabilit√© +8", impact:+8 }
];

const quizDiv=document.getElementById('quiz');
const systemLevelDiv=document.getElementById('systemLevel');
const finalBadge=document.getElementById('finalBadge');
const narrativeDiv=document.getElementById('narrative');
const soundGood=document.getElementById('soundGood');
const soundBad=document.getElementById('soundBad');

function updateSystemBar(){
  systemLevel=Math.max(0,Math.min(100,systemLevel));
  systemLevelDiv.style.width=systemLevel+"%";
  systemLevelDiv.textContent=systemLevel+"%";
  if(systemLevel>=80) systemLevelDiv.style.background="#27ae60";
  else if(systemLevel>=60) systemLevelDiv.style.background="#2ecc71";
  else if(systemLevel>=40) systemLevelDiv.style.background="#f1c40f";
  else systemLevelDiv.style.background="#e74c3c";
  if(systemLevel<40){systemLevelDiv.classList.add('shake');setTimeout(()=>systemLevelDiv.classList.remove('shake'),500);}
}

function floatingFeedback(msg,isGood){
  const div=document.createElement('div');
  div.className='floatingFeedback '+(isGood?'good':'bad');
  div.textContent=msg;
  document.body.appendChild(div);
  div.style.left=(Math.random()*70+15)+"%";
  if(isGood) soundGood.play(); else soundBad.play();
  setTimeout(()=>div.remove(),2500);
}

function triggerEvent(eventList){
  const event=eventList[Math.floor(Math.random()*eventList.length)];
  systemLevel+=event.impact;
  floatingFeedback(event.msg,event.impact>0);
  narrativeLog.push(event.msg);
  updateSystemBar();
}

questions.forEach((q,i)=>{
  const div=document.createElement('div');div.className='question';
  div.innerHTML=`<h2>Q${i+1}: ${q.q}</h2>`;
  const optsDiv=document.createElement('div');optsDiv.className='options';
  q.options.forEach(opt=>{
    const btn=document.createElement('button');
    btn.textContent=opt.text;
    btn.onclick=()=>{
      btn.disabled=true;
      optsDiv.querySelectorAll('button').forEach(b=>b.disabled=true);
      floatingFeedback(opt.feedback,opt.impact>0);
      systemLevel+=opt.impact;score++;updateSystemBar();
      if(Math.random()<0.6) triggerEvent(events);
      if(opt.branch==="miniChaos") triggerEvent(miniChaosEvents);
      if(i===questions.length-1){
        finalBadge.style.display="block";
        let narrativeText="üìñ R√©cit final :\n\n"+narrativeLog.map((e,idx)=>`${idx+1}. ${e}`).join("\n");
        let finale="";
        if(systemLevel>=80) finale="Hyperstable ‚úÖ : Vous avez orchestr√© un syst√®me parfait, o√π chaque chaos a √©t√© transform√© en ordre.";
        else if(systemLevel>=60) finale="Stable üîπ : Quelques frictions apparaissent mais le syst√®me tient bon.";
        else if(systemLevel>=40) finale="Instable ‚ö†Ô∏è : Les d√©cisions maladroites ont engendr√© de multiples mini-chaos.";
        else finale="Chaotique üî• : Le syst√®me s‚Äôeffondre et le chaos r√®gne, r√©v√©lant toutes les failles et absurdit√©s.";
        narrativeText+="\n\nSyst√®me final : "+finale;
        narrativeDiv.style.display="block";narrativeDiv.textContent=narrativeText;
      }
    };
    optsDiv.appendChild(btn);
  });
  div.appendChild(optsDiv);
  quizDiv.appendChild(div);
});

updateSystemBar();
</script>

</body>
</html>
