<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Film Politique Interactif : Ultime Ultime</title>
<style>
body { margin:0; padding:0; font-family:Arial,sans-serif; background:#111; color:#eee; overflow:hidden; perspective:1200px; }
#container { transform-style:preserve-3d; transition: transform 0.6s ease-out; }
h1,h2 { color:#f39c12; text-shadow:1px 1px 14px #000; text-align:center; }
#quiz { position:relative; z-index:10; max-width:700px; margin:20px auto; transform-style:preserve-3d; }
.question { margin:20px 0; padding:20px; background:rgba(44,62,80,0.9); border-radius:12px; box-shadow:0 0 40px #000; }
.options button { display:block; width:100%; margin:10px 0; padding:12px 20px; border:none; border-radius:6px; background:#3498db; color:#fff; font-weight:bold; cursor:pointer; transition:all 0.3s; }
.options button:hover { background:#2980b9; transform:scale(1.05) rotate(-1deg);}
#systemBar { height:40px; width:90%; background:#555; border-radius:10px; margin:20px auto; overflow:hidden; box-shadow:0 0 25px #000; }
#systemLevel { height:100%; width:50%; background:#27ae60; text-align:center; line-height:40px; color:#fff; font-weight:bold; transition: all 0.5s ease;}
#finalBadge { font-size:2em; margin:30px auto; color:#e67e22; text-align:center; display:none; text-shadow:2px 2px 18px #000; }
#narrative { font-size:1em; margin:20px auto; max-width:700px; background:rgba(52,73,94,0.95); padding:20px; border-radius:12px; display:none; box-shadow:0 0 40px #000; white-space:pre-line; }
.floatingFeedback { position:absolute; padding:12px 18px; border-radius:6px; font-weight:bold; opacity:0.95; animation: floatUp 2.5s ease forwards; pointer-events:none; z-index:100; transform-origin:center;}
.floatingFeedback.good { background:#2ecc71; border-left:5px solid #27ae60; color:#fff;}
.floatingFeedback.bad { background:#e74c3c; border-left:5px solid #c0392b; color:#fff;}
@keyframes floatUp { 0% {transform:translateY(0) scale(1) rotateX(0deg) rotateY(0deg); opacity:0.95;}
                     50% {transform:translateY(-60px) scale(1.1) rotateX(15deg) rotateY(10deg); opacity:1;}
                     100% {transform:translateY(-150px) scale(1) rotateX(-10deg) rotateY(-5deg); opacity:0;}}
.miniEvent { position:absolute; font-size:2.5em; opacity:0.9; animation: floatChaos 3s forwards; pointer-events:none; z-index:50; }
@keyframes floatChaos { 0% {transform:translateY(0) scale(1); opacity:0.9;}
                        50% {transform:translateY(-100px) scale(1.3);}
                        100% {transform:translateY(-300px) scale(1); opacity:0;} }
canvas { position:absolute; top:0; left:0; width:100%; height:100%; z-index:-1; }
.shake { animation: shakeAnim 0.5s;}
@keyframes shakeAnim { 0% {transform:translateX(0) translateY(0);} 25% {transform:translateX(-8px) translateY(5px);} 50% {transform:translateX(8px) translateY(-5px);} 75% {transform:translateX(-8px) translateY(5px);} 100% {transform:translateX(0) translateY(0);} }
</style>
</head>
<body>

<div id="container">
<h1>Film Politique Interactif : Ultime Ultime</h1>
<p style="text-align:center;">Chaque choix d√©clenche mini-chaos, √©clairs et feedbacks 3D.</p>
<div id="quiz"></div>
<div id="systemBar"><div id="systemLevel">50%</div></div>
<div id="finalBadge">üèÜ Cadre Syst√©mique : Approuv√© ‚úÖ</div>
<div id="narrative"></div>
</div>

<canvas id="bgCanvas"></canvas>

<audio id="soundGood" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
<audio id="soundBad" src="https://actions.google.com/sounds/v1/cartoon/boing.ogg"></audio>
<audio id="soundChaos" src="https://actions.google.com/sounds/v1/cartoon/concussive_hit_guitar_boing.ogg"></audio>
<audio id="bgMusic" src="https://actions.google.com/sounds/v1/ambiences/space_loop.ogg" loop autoplay></audio>

<script>
document.addEventListener("DOMContentLoaded", function(){
let systemLevel = 50;
let narrativeLog = [];
const quizDiv=document.getElementById('quiz');
const systemLevelDiv=document.getElementById('systemLevel');
const finalBadge=document.getElementById('finalBadge');
const narrativeDiv=document.getElementById('narrative');
const container=document.getElementById('container');
const soundGood=document.getElementById('soundGood');
const soundBad=document.getElementById('soundBad');
const soundChaos=document.getElementById('soundChaos');

// ===== Questions simplifi√©es pour l'exemple =====
const questions=[
{ q:"D√©cision strat√©gique majeure ?", options:[
{text:"Agir imm√©diatement", impact:-15, feedback:"‚ö†Ô∏è Chaos imminent."},
{text:"Analyser longuement", impact:+10, feedback:"‚úÖ Prudence payante."},
{text:"Reporter", impact:+5, feedback:"‚úÖ Temps gagn√©."},
{text:"Ignorer", impact:-10, feedback:"‚ö†Ô∏è Fragilit√© accrue."}
]},
{ q:"Fuite m√©diatique d√©tect√©e ?", options:[
{text:"D√©sarmer avec humour", impact:+10, feedback:"‚úÖ Retour habile."},
{text:"R√©pression directe", impact:-20, feedback:"üí• Chaos interne."},
{text:"Ignorer", impact:-5, feedback:"‚ö†Ô∏è Rumeurs circulent."},
{text:"D√©former l√©g√®rement", impact:+5, feedback:"‚úÖ Manipulation subtile."}
]}];

// Mini-√©v√©nements
const events=[{ msg:"Mini-chaos‚Ä¶ stabilit√© -10", impact:-10 },{ msg:"R√©union stabilisante‚Ä¶ +5", impact:+5 }];

function updateSystemBar(){
    systemLevel=Math.max(0,Math.min(100,systemLevel));
    systemLevelDiv.style.width=systemLevel+"%";
    systemLevelDiv.textContent=systemLevel+"%";
    if(systemLevel<40){container.classList.add('shake'); soundChaos.play(); setTimeout(()=>container.classList.remove('shake'),500);}
}

function floatingFeedback(msg,isGood){
    const div=document.createElement('div');
    div.className='floatingFeedback '+(isGood?'good':'bad');
    div.textContent=msg;
    document.body.appendChild(div);
    div.style.left=(Math.random()*70+15)+"%";
    div.style.transform=`rotateX(${(Math.random()*15-7)}deg) rotateY(${(Math.random()*15-7)}deg)`;
    if(isGood) soundGood.play(); else soundBad.play();
    setTimeout(()=>div.remove(),2500);
}

function triggerEvent(eventList){
    const event=eventList[Math.floor(Math.random()*eventList.length)];
    systemLevel+=event.impact;
    floatingFeedback(event.msg,event.impact>0);
    narrativeLog.push(event.msg);
    const count=Math.floor(Math.random()*3+1);
    for(let i=0;i<count;i++){
        const mini=document.createElement('div');
        mini.className='miniEvent';
        mini.textContent=['‚ö°','üî•','üí•','üìß','üõ°Ô∏è'][Math.floor(Math.random()*5)];
        mini.style.left=Math.random()*80+'%';
        mini.style.top=Math.random()*80+'%';
        document.body.appendChild(mini);
        setTimeout(()=>mini.remove(),3000);
    }
    updateSystemBar();
}

// Cr√©ation questions avec zoom et cam√©ra
questions.forEach((q,i)=>{
    const div=document.createElement('div');div.className='question';
    div.innerHTML=`<h2>Q${i+1}: ${q.q}</h2>`;
    const optsDiv=document.createElement('div');optsDiv.className='options';
    q.options.forEach(opt=>{
        const btn=document.createElement('button');
        btn.textContent=opt.text;
        btn.onclick=()=>{
            btn.disabled=true;
            optsDiv.querySelectorAll('button').forEach(b=>b.disabled=true);
            // Cam√©ra zoom + rotation
            container.style.transform=`scale(1.05) rotateX(${(Math.random()*5-2.5)}deg) rotateY(${(Math.random()*5-2.5)}deg)`;
            setTimeout(()=>{container.style.transform=`scale(1) rotateX(0deg) rotateY(0deg)`;},600);

            floatingFeedback(opt.feedback,opt.impact>0);
            if(opt.impact<0){createLightning();}
            systemLevel+=opt.impact; updateSystemBar();
            if(Math.random()<0.8) triggerEvent(events);
        };
        optsDiv.appendChild(btn);
    });
    div.appendChild(optsDiv);
    quizDiv.appendChild(div);
});

updateSystemBar();

// Canvas nuages + √©clairs
const canvas=document.getElementById('bgCanvas'); const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth; canvas.height=window.innerHeight;
let clouds=[]; for(let i=0;i<50;i++){clouds.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,s:Math.random()*150+50,dx:Math.random()*0.5+0.1,dy:Math.random()*0.1})}
function drawBackground(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    clouds.forEach(c=>{ctx.beginPath(); ctx.arc(c.x,c.y,c.s/2,0,Math.PI*2); ctx.fillStyle="rgba(200,200,255,0.05)"; ctx.fill(); c.x+=c.dx;c.y+=c.dy;if(c.x>canvas.width)c.x=-c.s;if(c.y>canvas.height)c.y=-c.s;});
    requestAnimationFrame(drawBackground);
}
drawBackground();
function createLightning(){ ctx.fillStyle="rgba(255,255,255,0.4)"; ctx.fillRect(Math.random()*canvas.width,0,3,canvas.height);}
});
</script>
</body>
</html>
