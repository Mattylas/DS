<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Politique</title>
<style>
body {
    margin:0;
    padding:0;
    font-family:Arial,sans-serif;
    background:#111;
    color:#eee;
    perspective:1200px;
}
#container { transform-style:preserve-3d; transition: transform 0.6s ease-out; }
h1,h2 { color:#f39c12; text-shadow:1px 1px 14px #000; text-align:center; }
#quiz { position:relative; z-index:10; max-width:700px; margin:20px auto; transform-style:preserve-3d; }
.question { margin:20px 0; padding:20px; background:rgba(44,62,80,0.9); border-radius:12px; box-shadow:0 0 40px #000; }
.options button { display:block; width:100%; margin:10px 0; padding:12px 20px; border:none; border-radius:6px; background:#3498db; color:#fff; font-weight:bold; cursor:pointer; transition:all 0.3s; }
.options button:hover { background:#2980b9; transform:scale(1.05) rotate(-1deg);}
#systemBar { height:40px; width:90%; background:#555; border-radius:10px; margin:20px auto; overflow:hidden; box-shadow:0 0 25px #000; }
#systemLevel { height:100%; width:50%; background:#27ae60; text-align:center; line-height:40px; color:#fff; font-weight:bold; transition: all 0.5s ease;}
#finalBadge { font-size:2em; margin:30px auto; color:#e67e22; text-align:center; display:none; text-shadow:2px 2px 18px #000; }
#narrative { font-size:1em; margin:20px auto; max-width:700px; background:rgba(52,73,94,0.95); padding:20px; border-radius:12px; display:none; box-shadow:0 0 40px #000; white-space:pre-line; }
.floatingFeedback { position:absolute; padding:12px 18px; border-radius:6px; font-weight:bold; opacity:0.95; animation: floatUp 2.5s ease forwards; pointer-events:none; z-index:100; transform-origin:center;}
.floatingFeedback.good { background:#2ecc71; border-left:5px solid #27ae60; color:#fff;}
.floatingFeedback.bad { background:#e74c3c; border-left:5px solid #c0392b; color:#fff;}
@keyframes floatUp { 0% {transform:translateY(0) scale(1) rotateX(0deg) rotateY(0deg); opacity:0.95;}
                     50% {transform:translateY(-60px) scale(1.1) rotateX(15deg) rotateY(10deg); opacity:1;}
                     100% {transform:translateY(-150px) scale(1) rotateX(-10deg) rotateY(-5deg); opacity:0;}}
.miniEvent { position:absolute; font-size:2.5em; opacity:0.9; animation: floatChaos 3s forwards; pointer-events:none; z-index:50; }
@keyframes floatChaos { 0% {transform:translateY(0) scale(1); opacity:0.9;}
                        50% {transform:translateY(-100px) scale(1.3);}
                        100% {transform:translateY(-300px) scale(1); opacity:0;} }
canvas#bgCanvas { position:fixed; top:0; left:0; width:100%; height:100%; z-index:-1; pointer-events:none; }
.shake { animation: shakeAnim 0.5s;}
@keyframes shakeAnim { 0% {transform:translateX(0) translateY(0);} 25% {transform:translateX(-8px) translateY(5px);} 50% {transform:translateX(8px) translateY(-5px);} 75% {transform:translateX(-8px) translateY(5px);} 100% {transform:translateX(0) translateY(0);} }
</style>
</head>
<body>

<div id="container">
<h1>Politique</h1>
<p style="text-align:center;">Chaque choix d√©clenche.</p>
<div id="quiz"></div>
<div id="systemBar"><div id="systemLevel">50%</div></div>
<div id="finalBadge">üèÜ Cadre Syst√©mique : Approuv√© ‚úÖ</div>
<div id="narrative"></div>
</div>

<canvas id="bgCanvas"></canvas>

<audio id="soundGood" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
<audio id="soundBad" src="https://actions.google.com/sounds/v1/cartoon/boing.ogg"></audio>
<audio id="soundChaos" src="https://actions.google.com/sounds/v1/cartoon/concussive_hit_guitar_boing.ogg"></audio>
<audio id="bgMusic" src="https://actions.google.com/sounds/v1/ambiences/space_loop.ogg" loop autoplay></audio>

<script>
document.addEventListener("DOMContentLoaded", function(){
let systemLevel = 50;
let narrativeLog = [];
const quizDiv=document.getElementById('quiz');
const systemLevelDiv=document.getElementById('systemLevel');
const finalBadge=document.getElementById('finalBadge');
const narrativeDiv=document.getElementById('narrative');
const container=document.getElementById('container');
const soundGood=document.getElementById('soundGood');
const soundBad=document.getElementById('soundBad');
const soundChaos=document.getElementById('soundChaos');

// ===== Questions enrichies avec triggers secrets =====
const questions=[
{ q:"Une proc√©dure inutile est introduite. Que faites-vous ?", options:[
{text:"Supprimer imm√©diatement", impact:-15, feedback:"‚ö° Brutal mais n√©cessaire ? Fragilise le syst√®me."},
{text:"Laisser continuer", impact:+10, feedback:"‚úÖ Absurde mais stabilisant."},
{text:"Publier un rapport", impact:-10, feedback:"‚ö†Ô∏è Transparence = exposition."},
{text:"Modifier l√©g√®rement", impact:+5, feedback:"üëç Ajustement subtil."}
]},
{ q:"Un acteur conteste une d√©cision majeure.", options:[
{text:"Punir l'acteur", impact:-20, feedback:"üí• Conflit direct, r√©sistance accrue."},
{text:"Cartographier et ajuster", impact:+15, feedback:"‚úÖ Contestation convertie en outil."},
{text:"Ignorer", impact:-5, feedback:"‚ö†Ô∏è Ignorance = zones d‚Äôincertitude."},
{text:"Publier un d√©menti", impact:-10, feedback:"‚ö†Ô∏è D√©menti inutile, fragilise image."}
]},
{ q:"Une crise se profile sur un projet strat√©gique.", options:[
{text:"Agir imm√©diatement", impact:-15, feedback:"‚ö†Ô∏è Urgence = chaos amplifi√©."},
{text:"√âtaler le processus", impact:+20, feedback:"‚úÖ Le temps neutralise le conflit."},
{text:"R√©unir pour vote", impact:-5, feedback:"‚ö†Ô∏è Trop de visibilit√©."},
{text:"Exiger des rapports", impact:+5, feedback:"‚úÖ Rapports prolongent la temporalit√©."}
]},
{ q:"Un audit complet est demand√©.", options:[
{text:"Tout montrer", impact:-20, feedback:"‚ö†Ô∏è Transparence totale fragilise."},
{text:"Montrer uniquement les visibles", impact:+15, feedback:"‚úÖ Illusion de contr√¥le rassurante."},
{text:"R√©sum√© g√©n√©ral", impact:+5, feedback:"‚úÖ Suffisant pour confiance."},
{text:"Refuser poliment", impact:-10, feedback:"‚ö†Ô∏è Refus attire suspicion."}
]},
{ q:"Une fuite m√©diatique √©clate.", options:[
{text:"D√©sarmer avec humour", impact:+10, feedback:"‚úÖ Retour habile."},
{text:"Ignorer compl√®tement", impact:-5, feedback:"‚ö†Ô∏è Silence = rumeurs."},
{text:"R√©pression directe", impact:-20, feedback:"üí• Risque de mini-chaos."},
{text:"D√©former l√©g√®rement", impact:+5, feedback:"‚úÖ Subtil ajustement narratif."}
]},
{ q:"Un espion interne est soup√ßonn√©.", options:[
{text:"Traquer sans piti√©", impact:-20, feedback:"üí• Chaos interne."},
{text:"Observer discr√®tement", impact:+15, feedback:"‚úÖ Prudence = gain strat√©gique."},
{text:"Publier accusation", impact:-10, feedback:"‚ö†Ô∏è Risque r√©putation."},
{text:"Ignorer", impact:-5, feedback:"‚ö†Ô∏è Laisser la menace cro√Ætre."}
]},
{ q:"Une opportunit√© internationale se pr√©sente.", options:[
{text:"Exploiter agressivement", impact:+20, feedback:"‚úÖ Gain maximal mais risqu√©."},
{text:"Analyser longuement", impact:+10, feedback:"üëç Stabilit√© accrue."},
{text:"Ignorer", impact:-10, feedback:"‚ö†Ô∏è Opportunit√© perdue."},
{text:"Reporter d√©cision", impact:+5, feedback:"‚úÖ Risque minimis√©."}
]},
{ q:"Un scandale interne √©clate.", options:[
{text:"Couper la t√™te du responsable", impact:-20, feedback:"üí• Punition spectaculaire, mais fragilise loyaut√©."},
{text:"M√©diatiser pour d√©tourner", impact:-5, feedback:"‚ö†Ô∏è Risque de chaos m√©diatique."},
{text:"R√©parer discr√®tement", impact:+15, feedback:"‚úÖ Subtil et efficace."},
{text:"Ignorer", impact:-10, feedback:"‚ö†Ô∏è Laisser pourrir le scandale."}
]},
{ q:"Une loi controvers√©e doit passer.", options:[
{text:"Imposer sans d√©bat", impact:-15, feedback:"‚ö†Ô∏è Autoritarisme = tension."},
{text:"Consulter et amender", impact:+10, feedback:"‚úÖ Consensus partiel atteint."},
{text:"Reporter", impact:+5, feedback:"‚úÖ Retarder = stabiliser."},
{text:"Laisser le parlement g√©rer", impact:-5, feedback:"‚ö†Ô∏è Chaos parlementaire."}
]},
{ q:"Une rumeur circule sur vos collaborateurs.", options:[
{text:"Nier publiquement", impact:-10, feedback:"‚ö†Ô∏è N√©gation = m√©fiance accrue."},
{text:"V√©rifier et corriger", impact:+15, feedback:"‚úÖ Gestion prudente."},
{text:"Exploiter pour manipuler", impact:+20, feedback:"‚úÖ Contr√¥le subtil renforc√©."},
{text:"Ignorer", impact:-5, feedback:"‚ö†Ô∏è Risque propagation."}
]},
{ q:"Une attaque cyber-menace vos donn√©es.", options:[
{text:"Bloquer et punir", impact:-15, feedback:"‚ö†Ô∏è Riposte visible = tensions."},
{text:"Isoler et corriger", impact:+15, feedback:"‚úÖ Neutralisation efficace."},
{text:"Simuler attaque interne", impact:-10, feedback:"‚ö†Ô∏è Confusion totale."},
{text:"Ignorer", impact:-20, feedback:"üí• D√©sastre in√©vitable."}
]},
{ q:"Un m√©dia tente de r√©v√©ler un secret.", options:[
{text:"Soudoyer la publication", impact:+15, feedback:"‚úÖ Manipulation r√©ussie."},
{text:"Nier et menacer", impact:-15, feedback:"‚ö†Ô∏è Effet boomerang probable."},
{text:"Ignorer", impact:-5, feedback:"‚ö†Ô∏è Laisser circuler = fragilit√©."},
{text:"Publier une version alternative", impact:+10, feedback:"‚úÖ Contournement cr√©atif."}
]}];

// Mini-√©v√©nements + secrets
const events=[{ msg:"Proc√©dure virale‚Ä¶ stabilit√© +5", impact:+5 },
{ msg:"Tweet rebelle‚Ä¶ stabilit√© -10", impact:-10 },
{ msg:"R√©union inutile‚Ä¶ stabilit√© +10", impact:+10 },
{ msg:"E-mail mal adress√©‚Ä¶ stabilit√© -8", impact:-8 }];

function updateSystemBar(){
    systemLevel=Math.max(0,Math.min(100,systemLevel));
    systemLevelDiv.style.width=systemLevel+"%";
    systemLevelDiv.textContent=systemLevel+"%";
    if(systemLevel<40){container.classList.add('shake'); soundChaos.play(); setTimeout(()=>container.classList.remove('shake'),500);}
}

function floatingFeedback(msg,isGood){
    const div=document.createElement('div');
    div.className='floatingFeedback '+(isGood?'good':'bad');
    div.textContent=msg;
    document.body.appendChild(div);
    div.style.left=(Math.random()*70+15)+"%";
    div.style.transform=`rotateX(${(Math.random()*15-7)}deg) rotateY(${(Math.random()*15-7)}deg)`;
    if(isGood) soundGood.play(); else soundBad.play();
    setTimeout(()=>div.remove(),2500);
}

// Trigger secret
function triggerSecret(option){
    if(option.secret){
        for(let i=0;i<3;i++){
            const mini=document.createElement('div');
            mini.className='miniEvent';
            mini.textContent=['üí•','‚ö°','üî•','üõ°Ô∏è','üìß'][Math.floor(Math.random()*5)];
            mini.style.left=Math.random()*80+'%';
            mini.style.top=Math.random()*80+'%';
            document.body.appendChild(mini);
            setTimeout(()=>mini.remove(),3500);
        }
        floatingFeedback("‚ö° Surprise secr√®te d√©clench√©e !", true);
        systemLevel+=10;
        updateSystemBar();
    }
}

function triggerEvent(eventList){
    const event=eventList[Math.floor(Math.random()*eventList.length)];
    systemLevel+=event.impact;
    floatingFeedback(event.msg,event.impact>0);
    narrativeLog.push(event.msg);
    const count=Math.floor(Math.random()*3+1);
    for(let i=0;i<count;i++){
        const mini=document.createElement('div');
        mini.className='miniEvent';
        mini.textContent=['‚ö°','üî•','üí•','üìß','üõ°Ô∏è'][Math.floor(Math.random()*5)];
        mini.style.left=Math.random()*80+'%';
        mini.style.top=Math.random()*80+'%';
        document.body.appendChild(mini);
        setTimeout(()=>mini.remove(),3000);
    }
    updateSystemBar();
}

// Cr√©ation des questions
questions.forEach((q,i)=>{
    const div=document.createElement('div');div.className='question';
    div.innerHTML=`<h2>Q${i+1}: ${q.q}</h2>`;
    const optsDiv=document.createElement('div');optsDiv.className='options';
    q.options.forEach(opt=>{
        const btn=document.createElement('button');
        btn.textContent=opt.text;
        btn.onclick=()=>{
            btn.disabled=true;
            optsDiv.querySelectorAll('button').forEach(b=>b.disabled=true);
            container.style.transform=`scale(1.05) rotateX(${(Math.random()*5-2.5)}deg) rotateY(${(Math.random()*5-2.5)}deg)`;
            setTimeout(()=>{container.style.transform=`scale(1) rotateX(0deg) rotateY(0deg)`;},600);

            floatingFeedback(opt.feedback,opt.impact>0);
            if(opt.impact<0){createLightning();}
            systemLevel+=opt.impact; updateSystemBar();
            triggerSecret(opt);
            if(Math.random()<0.8) triggerEvent(events);

            if(i===questions.length-1){
                finalBadge.style.display="block";
                let narrativeText="üìñ R√©cit final :\n\n"+narrativeLog.map((e,idx)=>`${idx+1}. ${e}`).join("\n");
                let finale="";
                if(systemLevel>=80) finale="Hyperstable ‚úÖ : Syst√®me parfait, chaos converti en ordre.";
                else if(systemLevel>=60) finale="Stable üîπ : Frictions mineures, syst√®me sous contr√¥le.";
                else if(systemLevel>=40) finale="Instable ‚ö†Ô∏è : D√©cisions maladroites, mini-chaos en cha√Æne.";
                else finale="Chaotique üî• : Effondrement total, chaos absolu.";
                narrativeText+="\n\nSyst√®me final : "+finale;
                narrativeDiv.style.display="block"; narrativeDiv.textContent=narrativeText;
            }
        };
        optsDiv.appendChild(btn);
    });
    div.appendChild(optsDiv);
    quizDiv.appendChild(div);
});

updateSystemBar();

// Canvas nuages + √©clairs
const canvas=document.getElementById('bgCanvas'); const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth; canvas.height=window.innerHeight;
let clouds=[]; for(let i=0;i<50;i++){clouds.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,s:Math.random()*150+50,dx:Math.random()*0.5+0.1,dy:Math.random()*0.1})}
function drawBackground(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    clouds.forEach(c=>{ctx.beginPath(); ctx.arc(c.x,c.y,c.s/2,0,Math.PI*2); ctx.fillStyle="rgba(200,200,255,0.05)"; ctx.fill(); c.x+=c.dx;c.y+=c.dy;if(c.x>canvas.width)c.x=-c.s;if(c.y>canvas.height)c.y=-c.s;});
    requestAnimationFrame(drawBackground);
}
drawBackground();
function createLightning(){ ctx.fillStyle="rgba(255,255,255,0.4)"; ctx.fillRect(Math.random()*canvas.width,0,3,canvas.height);}
</script>
</body>
</html>
